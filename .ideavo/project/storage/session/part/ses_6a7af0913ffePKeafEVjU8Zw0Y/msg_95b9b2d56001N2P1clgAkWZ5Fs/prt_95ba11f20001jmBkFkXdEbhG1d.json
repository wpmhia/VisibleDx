{
  "id": "prt_95ba11f20001jmBkFkXdEbhG1d",
  "messageID": "msg_95b9b2d56001N2P1clgAkWZ5Fs",
  "sessionID": "ses_6a7af0913ffePKeafEVjU8Zw0Y",
  "type": "tool",
  "tool": "write",
  "callID": "toolu_016fTY9E3wGvDH3F4DaUtvqS",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/help-system.tsx",
      "content": "'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog'\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion'\nimport { \n  HelpCircle, \n  Search, \n  BookOpen, \n  PlayCircle,\n  FileText,\n  ExternalLink,\n  Lightbulb,\n  Video,\n  MessageCircle\n} from 'lucide-react'\nimport { useTranslation } from '@/lib/language-context'\n\ninterface HelpItem {\n  id: string\n  title: string\n  content: string\n  category: 'getting-started' | 'modules' | 'troubleshooting' | 'medical'\n  keywords: string[]\n  videoUrl?: string\n  relatedLinks?: { title: string; url: string }[]\n}\n\ninterface HelpSystemProps {\n  context?: string // Current page/module context\n}\n\nexport default function HelpSystem({ context }: HelpSystemProps) {\n  const { t } = useTranslation()\n  const [searchQuery, setSearchQuery] = useState('')\n  const [selectedCategory, setSelectedCategory] = useState<string>('all')\n\n  const helpItems: HelpItem[] = [\n    {\n      id: 'getting-started',\n      title: 'Getting Started with VisibleDx',\n      content: `VisibleDx is an educational training tool for learning ME/CFS, Long COVID, and POTS diagnostic criteria. \n\nStart with the \"Educational Training Simulation\" for a guided experience, or choose individual modules to focus on specific skills.\n\nRemember: This is a training tool only - NOT for actual patient care.`,\n      category: 'getting-started',\n      keywords: ['start', 'begin', 'intro', 'first', 'how to'],\n      relatedLinks: [\n        { title: 'CDC ME/CFS Guidelines', url: 'https://www.cdc.gov/me-cfs/' },\n        { title: 'WHO Long COVID Definition', url: 'https://www.who.int/publications/i/item/9789240025035' }\n      ]\n    },\n    {\n      id: 'initial-screening',\n      title: 'Using the Initial Screening Module',\n      content: `The Initial Screening module simulates a chief complaint and symptom review process:\n\n1. Review the 16 training questions\n2. Select responses as if you were a patient\n3. Review the educational risk assessment\n4. Follow suggested next steps\n\nThis helps you understand symptom patterns and screening efficiency.`,\n      category: 'modules',\n      keywords: ['screening', 'questions', 'symptoms', 'quick'],\n      videoUrl: '#tutorial-screening'\n    },\n    {\n      id: 'orthostatic-vitals',\n      title: 'Orthostatic Vitals Training',\n      content: `Learn the NASA lean test protocol for POTS assessment:\n\n1. Use either manual or camera-based heart rate monitoring\n2. Follow the 10-minute protocol timing\n3. Record supine and standing measurements\n4. Review POTS diagnostic criteria\n\nThis module teaches proper orthostatic vital sign assessment techniques.`,\n      category: 'modules',\n      keywords: ['stand test', 'pots', 'orthostatic', 'heart rate', 'vitals'],\n    },\n    {\n      id: 'pem-assessment',\n      title: 'Post-Exertional Malaise (PEM) Training',\n      content: `PEM is the hallmark symptom of ME/CFS. This module teaches:\n\n1. How to identify PEM patterns\n2. Activity triggers and thresholds\n3. Recovery timeframes\n4. Impact on daily functioning\n\nUnderstanding PEM is crucial for ME/CFS recognition and management education.`,\n      category: 'modules',\n      keywords: ['pem', 'fatigue', 'malaise', 'mecfs', 'energy'],\n    },\n    {\n      id: 'diagnostic-criteria',\n      title: 'Applying Diagnostic Criteria',\n      content: `Learn to apply validated diagnostic criteria:\n\n• CDC ME/CFS case definition\n• WHO Long COVID clinical definition  \n• ESC POTS guidelines\n• ICD-10 coding principles\n\nThis educational module demonstrates systematic criteria application.`,\n      category: 'medical',\n      keywords: ['criteria', 'diagnosis', 'cdc', 'who', 'esc', 'guidelines'],\n    },\n    {\n      id: 'troubleshooting-camera',\n      title: 'Camera Not Working',\n      content: `If the camera heart rate feature isn't working:\n\n1. Check browser permissions for camera access\n2. Ensure good lighting conditions\n3. Place finger gently over camera lens\n4. Keep finger still during measurement\n5. Try manual mode if camera continues to fail\n\nMost issues are resolved by checking camera permissions and lighting.`,\n      category: 'troubleshooting',\n      keywords: ['camera', 'ppg', 'heart rate', 'permission', 'not working'],\n    },\n    {\n      id: 'data-privacy',\n      title: 'Data Privacy and Training Use',\n      content: `VisibleDx prioritizes educational privacy:\n\n• No real patient data should ever be entered\n• Training data stays in your browser locally\n• No data is transmitted to external servers\n• This tool is for education only, not patient care\n\nAlways use simulated scenarios and training cases only.`,\n      category: 'getting-started',\n      keywords: ['privacy', 'data', 'training', 'local', 'patient'],\n    }\n  ]\n\n  const categories = [\n    { id: 'all', label: 'All Topics' },\n    { id: 'getting-started', label: 'Getting Started' },\n    { id: 'modules', label: 'Training Modules' },\n    { id: 'medical', label: 'Medical Guidelines' },\n    { id: 'troubleshooting', label: 'Troubleshooting' }\n  ]\n\n  const filteredItems = helpItems.filter(item => {\n    const matchesCategory = selectedCategory === 'all' || item.category === selectedCategory\n    const matchesSearch = searchQuery === '' || \n      item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.content.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      item.keywords.some(keyword => keyword.toLowerCase().includes(searchQuery.toLowerCase()))\n    \n    return matchesCategory && matchesSearch\n  })\n\n  const contextualHelp = context ? helpItems.filter(item => \n    item.keywords.some(keyword => context.toLowerCase().includes(keyword))\n  ).slice(0, 2) : []\n\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        <Button variant=\"ghost\" size=\"sm\" className=\"flex items-center gap-2\">\n          <HelpCircle className=\"h-4 w-4\" />\n          Help\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-5 w-5\" />\n            Help & Documentation\n          </DialogTitle>\n          <DialogDescription>\n            Find answers and learn how to use VisibleDx educational training modules\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex-1 overflow-hidden\">\n          {/* Search and Filters */}\n          <div className=\"space-y-4 mb-6\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n              <Input\n                placeholder=\"Search help topics...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            \n            <div className=\"flex flex-wrap gap-2\">\n              {categories.map(category => (\n                <Button\n                  key={category.id}\n                  variant={selectedCategory === category.id ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setSelectedCategory(category.id)}\n                >\n                  {category.label}\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* Contextual Help */}\n          {contextualHelp.length > 0 && (\n            <div className=\"mb-6\">\n              <h3 className=\"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2\">\n                <Lightbulb className=\"h-4 w-4\" />\n                Relevant to Current Page\n              </h3>\n              <div className=\"space-y-2\">\n                {contextualHelp.map(item => (\n                  <div key={item.id} className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                    <h4 className=\"font-medium text-blue-900 text-sm mb-1\">{item.title}</h4>\n                    <p className=\"text-blue-700 text-xs\">{item.content.slice(0, 150)}...</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Help Content */}\n          <div className=\"overflow-y-auto flex-1\">\n            <Accordion type=\"single\" collapsible className=\"w-full\">\n              {filteredItems.map((item) => (\n                <AccordionItem key={item.id} value={item.id}>\n                  <AccordionTrigger className=\"text-left\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"flex items-center gap-2\">\n                        {item.category === 'getting-started' && <PlayCircle className=\"h-4 w-4 text-green-600\" />}\n                        {item.category === 'modules' && <FileText className=\"h-4 w-4 text-blue-600\" />}\n                        {item.category === 'medical' && <BookOpen className=\"h-4 w-4 text-purple-600\" />}\n                        {item.category === 'troubleshooting' && <HelpCircle className=\"h-4 w-4 text-amber-600\" />}\n                        <span className=\"font-medium\">{item.title}</span>\n                      </div>\n                    </div>\n                  </AccordionTrigger>\n                  <AccordionContent>\n                    <div className=\"space-y-4 pt-2\">\n                      <div className=\"prose prose-sm max-w-none\">\n                        {item.content.split('\\n').map((paragraph, index) => (\n                          <p key={index} className=\"text-gray-700 mb-2\">\n                            {paragraph}\n                          </p>\n                        ))}\n                      </div>\n                      \n                      {item.videoUrl && (\n                        <Button variant=\"outline\" size=\"sm\" className=\"flex items-center gap-2\">\n                          <Video className=\"h-4 w-4\" />\n                          Watch Tutorial\n                        </Button>\n                      )}\n                      \n                      {item.relatedLinks && item.relatedLinks.length > 0 && (\n                        <div>\n                          <p className=\"text-sm font-medium text-gray-700 mb-2\">Related Resources:</p>\n                          <div className=\"space-y-1\">\n                            {item.relatedLinks.map((link, index) => (\n                              <a\n                                key={index}\n                                href={link.url}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800\"\n                              >\n                                <ExternalLink className=\"h-3 w-3\" />\n                                {link.title}\n                              </a>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                      \n                      <div className=\"flex flex-wrap gap-1\">\n                        {item.keywords.map((keyword, index) => (\n                          <Badge key={index} variant=\"outline\" className=\"text-xs\">\n                            {keyword}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n                  </AccordionContent>\n                </AccordionItem>\n              ))}\n            </Accordion>\n          </div>\n\n          {/* Support Contact */}\n          <div className=\"border-t pt-4 mt-6\">\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-600\">\n                Can't find what you're looking for?\n              </p>\n              <Button variant=\"outline\" size=\"sm\" className=\"flex items-center gap-2\">\n                <MessageCircle className=\"h-4 w-4\" />\n                Contact Support\n              </Button>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"
    },
    "output": "",
    "metadata": {
      "diagnostics": {},
      "filepath": "/home/user/project/components/help-system.tsx",
      "exists": false
    },
    "title": "components/help-system.tsx",
    "time": {
      "start": 1758178953472,
      "end": 1758178953505
    }
  }
}